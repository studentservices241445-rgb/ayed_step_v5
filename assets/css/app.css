/*
  أكاديمية عايد الرسمية — برنامج تحديد مستوى STEP
  إصدار V5 (FINAL) – Mobile-first + PWA look
*/

:root{
  --navy:#0F172A;
  --navy-2:#111C33;
  --gold:#C9A44C;
  --gold-2:#F2D27C;
  --beige:#F5F2EA;
  --white:#FFFFFF;
  --muted:#64748B;
  --danger:#B42318;
  --success:#067647;
  --shadow: 0 18px 40px rgba(15,23,42,0.12);
  --shadow-soft: 0 10px 24px rgba(15,23,42,0.10);
  --radius: 18px;
  --radius-sm: 12px;
  --ring: 0 0 0 4px rgba(201,164,76,0.25);
  --transition: 170ms ease;
  --maxw: 1100px;
}

*{box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  margin:0;
  font-family: 'Cairo','Tajawal', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  /* استخدم نمط خلفية فاخر مع صورة العلامة المائية الجديدة */
  background:
    radial-gradient(1200px 500px at 80% -10%, rgba(201,164,76,0.18), transparent 60%),
    radial-gradient(900px 400px at 10% 0%, rgba(15,23,42,0.16), transparent 55%),
    var(--beige);
  /* صورة العلامة المائية تكرار خفيف عبر الصفحة */
  background-image: url('../img/background-pattern.png');
  background-repeat: repeat;
  background-size: 600px auto;
  color:var(--navy);
  line-height:1.7;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  padding-bottom: calc(24px + env(safe-area-inset-bottom));
}

a{color:inherit; text-decoration:none}
a:hover{opacity:0.95}

.container{max-width:var(--maxw); margin:0 auto; padding:18px 16px}

/* Header */
.header{
  position: sticky;
  top:0;
  z-index:20;
  background: rgba(245,242,234,0.86);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(15,23,42,0.08);
}
.header-inner{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
.logo{
  display:flex;
  align-items:center;
  gap:10px;
  min-width: 220px;
}
.logo img{height:52px; width:auto; display:block}
.nav{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  justify-content:flex-start;
}
.nav a{
  padding:10px 12px;
  border-radius:999px;
  border:1px solid rgba(15,23,42,0.10);
  background: rgba(255,255,255,0.70);
  transition: transform var(--transition), background var(--transition), border var(--transition);
  font-weight:700;
  font-size:14px;
}
.nav a:hover{transform: translateY(-1px); background:rgba(255,255,255,0.92)}

.badge{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid rgba(15,23,42,0.10);
  background: rgba(255,255,255,0.65);
  font-size:13px;
}

/* Hero */
.hero{
  padding: 22px 0 10px;
}
.hero-card{
  background: linear-gradient(180deg, rgba(255,255,255,0.86), rgba(255,255,255,0.74));
  border:1px solid rgba(15,23,42,0.10);
  border-radius: calc(var(--radius) + 6px);
  box-shadow: var(--shadow);
  overflow:hidden;
}
.hero-top{
  padding:18px 18px 14px;
  display:grid;
  grid-template-columns: 1.2fr 0.8fr;
  gap:14px;
}
@media (max-width: 860px){
  .hero-top{grid-template-columns: 1fr;}
}

.h-title{font-size:30px; line-height:1.2; margin:0 0 10px;}
.h-sub{color:var(--muted); margin:0 0 12px;}

.trust-strip{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
}
.trust-item{
  padding:10px 12px;
  border-radius:999px;
  border:1px dashed rgba(15,23,42,0.18);
  background: rgba(245,242,234,0.80);
  font-weight:700;
  font-size:13px;
}

.quran{
  background: rgba(15,23,42,0.95);
  color: #F8FAFC;
  border-radius: var(--radius);
  padding:14px 14px;
  box-shadow: var(--shadow-soft);
  position:relative;
  overflow:hidden;
}
.quran:before{
  content:"";
  position:absolute;
  inset:-40px;
  background: radial-gradient(circle at 20% 10%, rgba(201,164,76,0.25), transparent 55%),
              radial-gradient(circle at 80% 60%, rgba(242,210,124,0.18), transparent 60%);
}
.quran > *{position:relative}
.quran .verse{font-weight:700; font-size:18px; line-height:1.7; margin:0 0 6px;}
.quran .ref{opacity:0.9; font-size:13px}

/* Buttons */
.actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
.btn{
  appearance:none;
  border:0;
  cursor:pointer;
  padding: 12px 14px;
  border-radius: 999px;
  font-weight:800;
  font-size:15px;
  transition: transform var(--transition), box-shadow var(--transition), background var(--transition), opacity var(--transition);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  user-select:none;
}
.btn:focus{outline:none; box-shadow: var(--ring)}
.btn-primary{background: linear-gradient(135deg, var(--gold-2), var(--gold)); color: var(--navy)}
.btn-primary:hover{transform: translateY(-1px)}
.btn-secondary{background: rgba(15,23,42,0.92); color: #F8FAFC}
.btn-secondary:hover{transform: translateY(-1px)}
.btn-ghost{background: rgba(255,255,255,0.75); border:1px solid rgba(15,23,42,0.12)}
.btn-ghost:hover{transform: translateY(-1px); background: rgba(255,255,255,0.92)}
.btn-danger{background: rgba(180,35,24,0.12); border:1px solid rgba(180,35,24,0.3); color: var(--danger)}

.small{font-size:13px; padding:10px 12px}

/* Sections */
.section{margin-top:16px}
.section-title{font-size:20px; margin:0 0 10px}
.grid{
  display:grid;
  grid-template-columns: repeat(12, 1fr);
  gap:12px;
}
.card{
  grid-column: span 12;
  background: rgba(255,255,255,0.78);
  border:1px solid rgba(15,23,42,0.10);
  border-radius: var(--radius);
  padding:14px;
  box-shadow: var(--shadow-soft);
  transition: transform var(--transition);
}
.card:hover{transform: translateY(-1px)}

.col-4{grid-column: span 4}
.col-6{grid-column: span 6}
.col-8{grid-column: span 8}
.col-12{grid-column: span 12}
@media (max-width: 900px){
  .col-4,.col-6,.col-8{grid-column: span 12}
}

.muted{color:var(--muted)}
.kpi{display:flex; gap:10px; flex-wrap:wrap}
.kpi .pill{padding:10px 12px; border-radius:999px; background: rgba(245,242,234,0.9); border:1px solid rgba(15,23,42,0.10); font-weight:700}

/* Forms */
.form-row{display:grid; grid-template-columns: 1fr 1fr; gap:12px}
@media (max-width: 860px){
  .form-row{grid-template-columns: 1fr}
}
label{display:block; font-weight:800; margin-bottom:6px}
input, select, textarea{
  width:100%;
  padding:12px 12px;
  border-radius: 14px;
  border:1px solid rgba(15,23,42,0.14);
  background: rgba(255,255,255,0.9);
  font-family: inherit;
  font-size:15px;
}
textarea{min-height:120px; resize:vertical}
input:focus, select:focus, textarea:focus{outline:none; box-shadow: var(--ring); border-color: rgba(201,164,76,0.55)}

.help{font-size:13px; color:var(--muted); margin-top:6px}

/* Progress bars */
.bar{
  height: 12px;
  border-radius: 999px;
  background: rgba(15,23,42,0.10);
  overflow:hidden;
}
.bar > div{height:100%; width:0%; background: linear-gradient(90deg, var(--gold), var(--gold-2)); border-radius:999px; transition: width 500ms ease}

/* Question cards */
.question{
  border-radius: var(--radius);
  border:1px solid rgba(15,23,42,0.10);
  background: rgba(255,255,255,0.86);
  padding:14px;
  box-shadow: var(--shadow-soft);
}
.q-head{display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap; align-items:center}
.q-no{font-weight:900}
.q-meta{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
.tag{padding:6px 10px; border-radius:999px; font-size:12px; font-weight:800; border:1px solid rgba(15,23,42,0.12); background: rgba(245,242,234,0.9)}

.options{display:grid; gap:10px; margin-top:12px}
.option{
  display:flex;
  gap:10px;
  align-items:flex-start;
  padding:12px 12px;
  border-radius: 14px;
  border:1px solid rgba(15,23,42,0.14);
  background: rgba(255,255,255,0.92);
  cursor:pointer;
  transition: transform var(--transition), background var(--transition), border var(--transition);
}
.option:hover{transform: translateY(-1px)}
.option input{margin-top:4px; width:auto}
.option.correct{border-color: rgba(6,118,71,0.55); background: rgba(6,118,71,0.08)}
.option.wrong{border-color: rgba(180,35,24,0.55); background: rgba(180,35,24,0.08)}
.explain{margin-top:12px; padding:12px; border-radius: 14px; border:1px dashed rgba(15,23,42,0.18); background: rgba(245,242,234,0.85)}

/* Pagination grid */
.qgrid{display:grid; grid-template-columns: repeat(10, 1fr); gap:8px; margin-top:12px}
.qgrid button{
  padding:10px 0;
  border-radius: 12px;
  border:1px solid rgba(15,23,42,0.14);
  background: rgba(255,255,255,0.75);
  font-weight:900;
  cursor:pointer;
  transition: transform var(--transition), background var(--transition);
}
.qgrid button:hover{transform: translateY(-1px); background: rgba(255,255,255,0.92)}
.qgrid button.active{background: rgba(15,23,42,0.92); color:#F8FAFC; border-color: rgba(15,23,42,0.0)}
.qgrid button.answered{border-color: rgba(201,164,76,0.6)}

@media (max-width: 520px){
  .qgrid{grid-template-columns: repeat(5, 1fr)}
}

/* Tables */
.table-wrap{overflow:auto; border-radius: var(--radius); border:1px solid rgba(15,23,42,0.12)}
table{width:100%; border-collapse:collapse; min-width: 720px; background: rgba(255,255,255,0.9)}
th,td{padding:12px; border-bottom:1px solid rgba(15,23,42,0.10); vertical-align:top}
th{background: rgba(245,242,234,0.95); text-align:right; font-weight:900}

/* Alerts */
.alert{
  padding:12px 14px;
  border-radius: var(--radius);
  border:1px solid rgba(15,23,42,0.12);
  background: rgba(255,255,255,0.88);
}
.alert-danger{border-color: rgba(180,35,24,0.35); background: rgba(180,35,24,0.10); color: var(--danger); font-weight:900}
.alert-success{border-color: rgba(6,118,71,0.35); background: rgba(6,118,71,0.10); color: var(--success); font-weight:900}

/* Toast */
.toast-host{
  position:fixed;
  left: 16px;
  right: 16px;
  bottom: calc(16px + env(safe-area-inset-bottom));
  z-index: 999;
  display:flex;
  justify-content:center;
  pointer-events:none;
}
.toast{
  width: min(640px, 100%);
  pointer-events:auto;
  background: rgba(15,23,42,0.94);
  color: #F8FAFC;
  border:1px solid rgba(201,164,76,0.35);
  border-radius: 18px;
  padding: 12px 12px;
  box-shadow: var(--shadow);
  display:flex;
  gap:10px;
  align-items:flex-start;
  transform: translateY(18px);
  opacity:0;
  transition: transform 220ms ease, opacity 220ms ease;
}
.toast.show{transform: translateY(0); opacity:1}
.toast .t-title{font-weight:900; font-size:14px}
.toast .t-text{opacity:0.95; font-size:13px}
.toast .t-quote{opacity:0.85; font-size:12px; margin-top:4px}
.toast .t-actions{display:flex; gap:8px; align-items:center; margin-top:8px; flex-wrap:wrap}
.toast .t-actions a{display:inline-flex}
.toast .t-x{
  margin-inline-start:auto;
  background: transparent;
  color:#F8FAFC;
  border: 0;
  cursor:pointer;
  opacity:0.9;
  font-size:18px;
}

/* Breadcrumbs */
.breadcrumbs{display:flex; gap:8px; flex-wrap:wrap; align-items:center; font-size:13px; color:var(--muted)}
.breadcrumbs a{opacity:0.95; text-decoration:underline}

/* Accordion */
.accordion{display:grid; gap:10px}
.acc-item{border:1px solid rgba(15,23,42,0.10); background: rgba(255,255,255,0.82); border-radius: var(--radius); overflow:hidden}
.acc-head{padding:12px 14px; cursor:pointer; display:flex; align-items:center; justify-content:space-between; gap:10px}
.acc-head strong{font-weight:900}
.acc-body{padding:0 14px 14px; display:none; color:var(--navy)}
.acc-item.open .acc-body{display:block}
.acc-item.open .acc-head{background: rgba(245,242,234,0.92)}

.chips{display:flex; gap:10px; flex-wrap:wrap}
.chip{
  padding:10px 12px;
  border-radius:999px;
  border:1px solid rgba(15,23,42,0.12);
  background: rgba(255,255,255,0.82);
  font-weight:900;
  cursor:pointer;
  transition: transform var(--transition);
}
.chip:hover{transform: translateY(-1px)}
.chip.active{background: rgba(15,23,42,0.92); color:#F8FAFC; border-color: rgba(15,23,42,0.0)}

/* Footer */
.footer{margin-top:18px; padding:16px 0; color:var(--muted); font-size:13px}

/* Assistant */
.assistant-fab{
  position: fixed;
  bottom: calc(20px + env(safe-area-inset-bottom));
  left: 18px;
  z-index: 1000;
}
.assistant-btn{
  width:56px;
  height:56px;
  border-radius: 999px;
  border: 1px solid rgba(201,164,76,0.35);
  background: rgba(15,23,42,0.95);
  color:#F8FAFC;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  box-shadow: var(--shadow);
  transition: transform var(--transition);
}
.assistant-btn:hover{transform: translateY(-1px)}

/* Animated floating button: add gentle bounce to draw attention */
.assistant-fab .assistant-btn{
  animation: assistant-bounce 3s infinite ease-in-out;
}

@keyframes assistant-bounce{
  0%, 100%{transform: translateY(0)}
  50%{transform: translateY(-3px)}
}

/* Redesigned assistant window with separate theme */
.assistant-window{
  position: fixed;
  bottom: calc(90px + env(safe-area-inset-bottom));
  left: 18px;
  width: min(360px, calc(100vw - 36px));
  max-height: min(560px, calc(100vh - 140px));
  background: rgba(248,250,252,0.95);
  border:1px solid rgba(15,23,42,0.10);
  border-radius: 22px;
  box-shadow: var(--shadow);
  overflow:hidden;
  z-index:1000;
  display:none;
}
.assistant-window.open{display:flex; flex-direction:column}
.assistant-window .assistant-top{
  padding:12px 14px;
  background: rgba(15,23,42,0.95);
  color:#F8FAFC;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.assistant-window .assistant-top .name{font-weight:800}
.assistant-window .assistant-body{
  flex:1;
  padding:10px 14px;
  overflow:auto;
  background: #f7f7f5;
  display:flex;
  flex-direction:column;
  gap:6px;
}
.assistant-window .bubble{
  margin-bottom:6px;
  padding:10px 12px;
  border-radius: 14px;
  max-width: 85%;
  word-wrap: break-word;
  font-size:14px;
  line-height:1.6;
}
.assistant-window .bubble.me{
  background: rgba(6,118,71,0.10);
  color: var(--navy);
  align-self:flex-end;
}
.assistant-window .bubble:not(.me){
  background: rgba(15,23,42,0.08);
  color: var(--navy);
  align-self:flex-start;
}
.assistant-window .assistant-actions{
  padding:10px 14px;
  border-top:1px solid rgba(15,23,42,0.08);
  background: rgba(255,255,255,0.85);
  display:flex;
  flex-direction:column;
  gap:8px;
}
.assistant-window .quick{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
}
.assistant-window .assistant-input{
  display:flex;
  gap:6px;
}
.assistant-window .assistant-input .input{
  flex:1;
  padding:10px;
  border-radius: 14px;
  border:1px solid rgba(15,23,42,0.15);
  background: rgba(255,255,255,0.95);
}
.assistant-window .assistant-input .btn{
  padding:10px 14px;
  border-radius: 14px;
}

/* Success stories accent: display user avatar in accordion header */
.acc-head{
  position:relative;
  padding-left:52px;
}
.acc-head::before{
  content:"";
  position:absolute;
  top:50%;
  left:14px;
  transform:translateY(-50%);
  width:36px;
  height:36px;
  border-radius:50%;
  background-image: url('../img/user-placeholder.png');
  background-size:cover;
  background-position:center;
  filter:drop-shadow(0 2px 2px rgba(0,0,0,0.1));
}

.assistant-panel{
  position: fixed;
  bottom: calc(90px + env(safe-area-inset-bottom));
  left: 18px;
  width: min(360px, calc(100vw - 36px));
  max-height: min(560px, calc(100vh - 140px));
  background: rgba(255,255,255,0.92);
  border:1px solid rgba(15,23,42,0.12);
  border-radius: 22px;
  box-shadow: var(--shadow);
  overflow:hidden;
  z-index:1000;
  display:none;
}
.assistant-panel.open{display:flex; flex-direction:column}
.assistant-head{
  padding:12px 14px;
  background: rgba(15,23,42,0.95);
  color:#F8FAFC;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.assistant-head .status{font-size:12px; opacity:0.95}
.assistant-head .title{font-weight:900}
.assistant-body{padding:12px; overflow:auto; display:flex; flex-direction:column; gap:10px}
.msg{
  max-width: 88%;
  padding:10px 12px;
  border-radius: 16px;
  border:1px solid rgba(15,23,42,0.10);
  background: rgba(245,242,234,0.92);
  box-shadow: 0 8px 18px rgba(15,23,42,0.08);
  white-space:pre-wrap;
}
.msg.me{margin-right:auto; background: rgba(201,164,76,0.18); border-color: rgba(201,164,76,0.35)}
.msg.bot{margin-left:auto; background: rgba(255,255,255,0.96)}
.assistant-actions{padding:10px 12px; border-top:1px solid rgba(15,23,42,0.10); display:flex; flex-wrap:wrap; gap:8px}
.assistant-actions a{display:inline-flex}

.assistant-input{
  padding:10px 12px;
  border-top:1px solid rgba(15,23,42,0.10);
  display:flex;
  gap:10px;
  align-items:center;
}
.assistant-input input{flex:1}

/* Print (PDF) */
@media print{
  body{background:#fff}
  .header,.assistant-fab,.assistant-panel,.toast-host,.no-print{display:none !important}
  .print-wrap{display:block !important}
}

.print-wrap{display:none}
.print-a4{
  width: 210mm;
  min-height: 297mm;
  padding: 16mm;
  margin: 0 auto;
  background:#fff;
  color:#0F172A;
}
.print-brand{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10mm}
.print-brand img{height:34mm}
.watermark{
  position: fixed;
  inset: 0;
  display:none;
}
@media print{
  .watermark{display:block}
}
.watermark::before{
  content:"Ayed Official";
  position:absolute;
  top: 45%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(-18deg);
  font-size: 90px;
  opacity: 0.05;
  color: #0F172A;
  font-weight: 900;
  letter-spacing: 2px;
  white-space:nowrap;
}

.print-only{display:none}
@media print{.print-only{display:block}}

@keyframes bounce{0
@keyframes bounce{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-6px)}
}
.bounce{animation:bounce 1.2s ease-in-out infinite}
