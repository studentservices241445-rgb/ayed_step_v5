<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0F172A" />
  <title>الكويزات — أكاديمية عايد الرسمية</title>
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="icon" type="image/png" sizes="32x32" href="./assets/img/icons/favicon-32.png" />
  <link rel="stylesheet" href="./assets/css/tailwind.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&family=Tajawal:wght@400;500;700;800;900&display=swap" rel="stylesheet" />
</head>
<body>
  <header class="site-header">
    <div class="header-inner">
      <a class="brand" href="./index.html" aria-label="الرئيسية">
        <img src="./assets/img/icons/icon-192.png" alt="أكاديمية عايد الرسمية" />
        <div>
          <div class="title">أكاديمية عايد الرسمية</div>
          <div class="subtitle">إنشاء كويز + حل + مراجعة أخطاء</div>
        </div>
      </a>
      <nav class="nav" aria-label="التنقل">
        <a href="./index.html">الرئيسية</a>
        <a href="./test.html">الاختبار</a>
        <a href="./results.html">خطتي/نتائجي</a>
        <a href="./faq.html">FAQ</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div id="setupView">
      <div class="card">
        <div class="badge gold">إنشاء كويز</div>
        <div class="h1" style="margin:10px 0 8px">اختر الإعدادات… ونطلع لك كويز بنفس اللحظة</div>
        <p class="p">تقدر تختار (القسم + عدد الأسئلة + الصعوبة + النموذج 49/50/51/خليط + الأكثر تكرارًا أسبوع/شهر). والرابط يحتوي Seed عشان أي شخص يفتح نفس الكويز.</p>

        <form id="quizForm">
          <div class="grid-2">
            <div class="field">
              <div class="label">القسم</div>
              <select id="q_section" class="input">
                <option value="Mixed">مختلط</option>
                <option value="Vocabulary">المفردات</option>
                <option value="Grammar">القواعد</option>
                <option value="Reading">القراءة</option>
                <option value="Listening">الاستماع</option>
              </select>
            </div>

            <div class="field">
              <div class="label">عدد الأسئلة</div>
              <select id="q_count" class="input">
                <option value="5">5</option>
                <option value="10" selected>10</option>
                <option value="15">15</option>
                <option value="20">20</option>
              </select>
            </div>

            <div class="field">
              <div class="label">الصعوبة</div>
              <select id="q_difficulty" class="input">
                <option value="auto" selected>تلقائي حسب مستواك</option>
                <option value="1">1 (سهل)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (صعب)</option>
              </select>
            </div>

            <div class="field">
              <div class="label">النموذج</div>
              <select id="q_model" class="input">
                <option value="mix" selected>خليط</option>
                <option value="49">49</option>
                <option value="50">50</option>
                <option value="51">51</option>
              </select>
            </div>

            <div class="field">
              <div class="label">فلتر (الأكثر تكرارًا)</div>
              <select id="q_trend" class="input">
                <option value="none" selected>بدون</option>
                <option value="week">الأكثر تكرارًا (أسبوع)</option>
                <option value="month">الأكثر تكرارًا (شهر)</option>
              </select>
            </div>

            <div class="field">
              <div class="label">Keywords (اختياري)</div>
              <input id="q_keywords" class="input" placeholder="مثال: time management" />
              <div class="help">إذا كتبت كلمة… يحاول يركز عليها قدر الإمكان.</div>
            </div>

            <div class="field">
              <div class="label">Seed (لثبات الكويز)</div>
              <input id="q_seed" class="input" placeholder="مثال: a1b2c3" />
              <div class="help">اتركه كما هو… أو غيره إذا تبي كويز جديد.</div>
            </div>

          <div class="btn-row">
            <button class="btn primary" type="submit">توليد الكويز</button>
            <a class="btn" href="./test.html">أبي الاختبار الكامل</a>
          </div>
        </form>
      </div>

      <div id="quizSummary" style="margin-top:14px"></div>
    </div>

    <div id="runView" style="display:none">
      <div class="card">
        <div class="breadcrumbs">
          <a href="./index.html">الرئيسية</a>
          <span>›</span>
          <a href="./quiz.html">الكويزات</a>
          <span>›</span>
          <span>حل الكويز</span>
        </div>

        <div class="h1" id="runTitle" style="margin:10px 0 8px">—</div>
        <div class="muted" id="runMeta">—</div>

        <div class="divider"></div>

        <div class="btn-row" style="margin-top:0">
          <label class="btn sm" style="cursor:pointer">
            <input id="toggleExplain" type="checkbox" style="margin-inline-start:8px" checked />
            شرح (تشغيل/إيقاف)
          </label>

          <label class="btn sm" style="cursor:pointer">
            <input id="toggleFocus" type="checkbox" style="margin-inline-start:8px" checked />
            وضع التركيز (إيقاف الإشعارات)
          </label>

          <button class="btn sm danger" id="btnExit" type="button" style="margin-inline-start:auto">خروج</button>
        </div>

        <div style="margin-top:12px">
          <div class="bar"><span id="runProgress"></span></div>
        </div>

        <div class="divider"></div>

        <div class="badge gold" id="qIndex">سؤال —</div>
        <div id="qPassage" class="card soft" style="margin-top:12px;display:none"></div>
        <div id="qTranscript" class="card soft" style="margin-top:12px;display:none"></div>

        <div class="label" style="margin-top:12px">السؤال</div>
        <div id="qPrompt" class="h1" style="font-size:18px;margin:8px 0 10px"></div>

        <div id="qChoices" style="display:flex;flex-direction:column;gap:10px"></div>

        <div id="qExplain" style="margin-top:12px;display:none"></div>

        <div class="divider"></div>

        <div class="btn-row" style="justify-content:space-between">
          <button class="btn" id="btnPrev" type="button">السابق</button>
          <button class="btn" id="btnNext" type="button">التالي</button>
          <button class="btn primary" id="btnFinish" type="button">إنهاء الكويز</button>
        </div>
      </div>

      <div id="finishBox" style="margin-top:14px;display:none"></div>

      <div id="reviewAnchor" style="height:1px"></div>
      <div class="card" style="margin-top:14px">
        <div class="badge">مراجعة الأخطاء</div>
        <p class="p">مراجعة الأخطاء هي اللي ترفع مستواك بسرعة. افتح كل خطأ وافهم السبب.</p>
        <div id="reviewBox"></div>
      </div>
    </div>

    <footer>
      <div class="line">
        <div>© <span id="year"></span> أكاديمية عايد الرسمية</div>
        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <a href="./privacy.html">الخصوصية</a>
          <a href="./terms.html">الشروط</a>
        </div>
      </div>
    </footer>
  </main>

  <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <h3 id="modalTitle"></h3>
      <div id="modalBody"></div>
    </div>
  </div>

  <script type="module" src="./assets/js/bootstrap.js"></script>
  <script type="module" src="./assets/js/quiz.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
